vm_name: "yan85"
byte_order: "little"

fields_order: ["arg1", "opcode", "arg2"]

registers:
  "0x20": "a"
  "0x04": "b"
  "0x01": "c"
  "0x02": "d"
  "0x40": "s"
  "0x08": "i"
  "0x10": "f"

instructions:
  "0x02":
    mnemonic: "IMM"
    enabled: true
    length: 3                # total instruction length in bytes
    operands:
      - { name: "dst", kind: "reg", source: "arg1" }
      - { name: "src", kind: "imm", source: "arg2" }
    semantics: "arg1 = arg2" # optional, just documentation

  "0x40":
    mnemonic: "ADD"
    enabled: true
    length: 3
    operands:
      - { name: "dst", kind: "reg", source: "arg1" }
      - { name: "src", kind: "reg", source: "arg2" } 
    semantics: "arg1 = arg1 + arg2"

  "0x80":
    mnemonic: "STK"
    enabled: true
    length: 3   
    operands:
      - { name: "poppe", kind: "reg", source: "arg1", optional: true }
      - { name: "pushe", kind: "reg", source: "arg2", optional: true }
    semantics: "stack ops depending on bits of arg1/arg2"

  "0x20":
    mnemonic: "STM"
    enabled: true
    length: 3
    operands:
      - { name: "pointer", kind: "reg", source: "arg1" }
      - { name: "value"  , kind: "reg", source: "arg2" }
    semantics: "store value of arg2 into address of arg1"

  "0x01":
    mnemonic: "LDM"
    enabled: true
    length: 3
    operands:
      - { name: "loadee" , kind: "reg", source: "arg1" }
      - { name: "pointer", kind: "reg", source: "arg2" }
    semantics: "load value that arg2 is pointing to into arg1"

  "0x04":
    mnemonic: "CMP"
    enabled: true
    length: 3
    operands:
      - { name: "val1", kind: "reg", source: "arg1" }
      - { name: "val2", kind: "reg", source: "arg2" }
    semantics: "Compare val1 and val2" 
 
  "0x08":
    mnemonic: "JMP"
    enabled: true # ← important: “known but ignore for now”
    length: 3
    operands:
      - { name: "flag", kind: "imm", source: "arg1" }
      - { name: "dst" , kind: "reg", source: "arg2" }
    note: "encoding/semantics unknown, TODO"

  "0x10":
    mnemonic: "SYS"
    enabled: true
    length: 3
    operands:
      - { name: "type", kind: "imm", source: "arg1" }
      - { name: "ret" , kind: "reg", source: "arg2" }
    note: "special syscall-like; not implemented yet"

